<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="CGGJidmg9parYMdFHNi4jklzZ7ul8ciafDiIBtup_nY" />
    <title>DEA MiCAR Tracker - Track Electronic Money Token (EMT) issuers and Crypto Asset Service Providers (CASPs) across Europe</title>
    <!-- OpenÂ GraphÂ metadata -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://micatracker.digital-euro-association.de/">
    <meta property="og:title" content="DEA MiCAR Tracker - Track Electronic Money Token (EMT) issuers and Crypto Asset Service Providers (CASPs) across Europe">
    <meta property="og:description" content="Track Electronic Money Token (EMT) issuers and Crypto Asset Service Providers (CASPs) across Europe.">
    <meta property="og:image" content="https://micatracker.digital-euro-association.de/cover.png">

    <!-- TwitterÂ Card metadata -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://micatracker.digital-euro-association.de/">
    <meta name="twitter:title" content="DEA MiCAR Tracker - Track Electronic Money Token (EMT) issuers and Crypto Asset Service Providers (CASPs) across Europe">
    <meta name="twitter:description" content="Track Electronic Money Token (EMT) issuers and Crypto Asset Service Providers (CASPs) across Europe.">
    <meta name="twitter:image" content="https://micatracker.digital-euro-association.de/cover.png">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles/tailwind.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script defer src="https://cloud.umami.is/script.js" data-website-id="dbd82f5d-689a-452f-9fff-fba85b9de507"></script>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

    body {
    font-family: "Twemoji Country Flags", 'Inter', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
    background: linear-gradient(90deg, #58c1ba, #004aad);
    min-height: 100vh;
    }

    .main-bg {
    background: linear-gradient(90deg, #58c1ba, #004aad);
    }

    .header-sticky {
    position: sticky;
    top: 0;
    z-index: 50;
    backdrop-filter: blur(10px);
    background: linear-gradient(90deg, rgba(88, 193, 186, 0.95), rgba(0, 74, 173, 0.95));
    }

    .card-hover {
    transition: all 0.3s ease;
    }

    .card-hover:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .progress-bar {
    transition: width 0.8s ease-in-out;
    }

    .fade-in {
    animation: fadeIn 0.6s ease-in;
    }

    @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
    }

    .kpi-card {
    background: linear-gradient(135deg, var(--start-color), var(--end-color));
    }

    /* Complementary colors to the teal-blue gradient */
    .kpi-teal { --start-color: #14b8a6; --end-color: #0f766e; }
    .kpi-blue { --start-color: #0ea5e9; --end-color: #0369a1; }
    .kpi-orange { --start-color: #f97316; --end-color: #ea580c; }
    .kpi-coral { --start-color: #f43f5e; --end-color: #e11d48; }
    .kpi-purple { --start-color: #8b5cf6; --end-color: #7c3aed; }
    .kpi-red { --start-color: #dc2626; --end-color: #b91c1c; }
    .kpi-green { --start-color: #10b981; --end-color: #059669; }
    .kpi-yellow { --start-color: #f59e0b; --end-color: #d97706; }

    .search-input {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    }

    .content-bg {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    }

    .logo-container {
    max-height: 80px;
    width: auto;
    margin-right: 20px;
    cursor: pointer;
    }

    .tab-button {
    transition: all 0.3s ease;
    }

    .tab-active {
    background: white;
    color: #1e40af;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .tab-inactive {
    background: rgba(59, 130, 246, 0.3);
    color: white;
    }

    .tab-inactive:hover {
    background: rgba(59, 130, 246, 0.5);
    }

    .nav-buttons {
        flex-wrap: wrap;
        gap: 0.75rem;
        justify-content: flex-end;
    }

    .nav-buttons .tab-button {
        flex: 1 1 auto;
    }

    @media (max-width: 768px) {
        .header-content {
            flex-direction: column;
            align-items: stretch;
            gap: 1.25rem;
        }

        .nav-buttons {
            justify-content: center;
            width: 100%;
        }
    }

    @media (max-width: 640px) {
        .nav-buttons .tab-button {
            flex: 1 1 calc(50% - 0.75rem);
        }

        .header-sticky.shrink .nav-buttons .tab-button {
            font-size: 0.875rem;
            padding: 0.75rem 1rem;
        }
    }

    @media (max-width: 400px) {
        .nav-buttons .tab-button {
            flex-basis: 100%;
        }
    }

    /* Dynamic currency cards */
    .currency-card {
    transition: all 0.3s ease;
    }

    .currency-card:hover {
    transform: scale(1.05);
    }

    /* === Sticky header shrink on scroll === */
    .header-sticky {
        transition: all 0.3s ease-in-out;
    }

    .header-sticky.shrink {
        padding-top: 0.5rem;   /* smaller vertical padding */
        padding-bottom: 0.5rem;
    }

    .header-sticky.shrink .logo-container {
        max-height: 40px;      /* shrink logo */
    }

    .header-sticky.shrink h1 {
        font-size: clamp(1.1rem, 3vw, 1.6rem);
    }

    .header-sticky.shrink .additional-info {
        display: none;         /* hide extra header lines */
    }

    .header-sticky.shrink .tab-button {
        padding: 0.5rem 1rem;  /* tighter buttons */
        font-size: 0.875rem;   /* Tailwind 'text-sm' */
    }
    </style>
    <style>
    /* hide the "xx.x% of total" under each card */
    #eurPercentage,
    #usdPercentage,
    #gbpPercentage,
    #czkPercentage {
    display: none;
    }
    </style>

    <style>
  /* hide the entire "Currency Distribution Analysis" card */
  .card-hover:has(.fa-coins) {
    display: none !important;
  }
</style>
    <style>
      .cookie-banner {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        width: min(22rem, calc(100% - 2rem));
        padding: 1.5rem;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 64, 175, 0.95));
        color: #f8fafc;
        border-radius: 1.25rem;
        box-shadow: 0 20px 45px -20px rgba(15, 23, 42, 0.7);
        border: 1px solid rgba(148, 163, 184, 0.25);
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
        transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
      }

      .cookie-banner.cookie-hidden {
        transform: translateY(25px);
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
      }

      .cookie-banner h2 {
        font-size: 1.125rem;
        font-weight: 700;
        margin: 0;
      }

      .cookie-banner p {
        margin: 0;
        font-size: 0.95rem;
        line-height: 1.5;
        color: #e2e8f0;
      }

      .cookie-banner .cookie-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .cookie-banner .cookie-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 0.75rem;
        background: rgba(255, 255, 255, 0.12);
        color: #facc15;
        font-size: 1.25rem;
      }

      .cookie-banner .cookie-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: center;
      }

      .cookie-banner button {
        font: inherit;
        border: none;
        cursor: pointer;
      }

      .cookie-banner .cookie-accept {
        padding: 0.65rem 1.5rem;
        border-radius: 9999px;
        background: #ffffff;
        color: #1e40af;
        font-weight: 600;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .cookie-banner .cookie-accept:hover,
      .cookie-banner .cookie-accept:focus-visible {
        transform: translateY(-1px);
        box-shadow: 0 10px 18px -12px rgba(15, 23, 42, 0.9);
      }

      .cookie-banner .cookie-dismiss {
        padding: 0.65rem 1.15rem;
        border-radius: 9999px;
        background: rgba(255, 255, 255, 0.12);
        color: #f8fafc;
        font-weight: 500;
        transition: background 0.2s ease, transform 0.2s ease;
      }

      .cookie-banner .cookie-dismiss:hover,
      .cookie-banner .cookie-dismiss:focus-visible {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }

      .cookie-banner .cookie-close {
        position: absolute;
        top: 0.65rem;
        right: 0.65rem;
        width: 2rem;
        height: 2rem;
        border-radius: 9999px;
        background: transparent;
        color: #cbd5f5;
        font-size: 1.1rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease, color 0.2s ease;
      }

      .cookie-banner .cookie-close:hover,
      .cookie-banner .cookie-close:focus-visible {
        background: rgba(255, 255, 255, 0.1);
        color: #ffffff;
      }

      @media (max-width: 640px) {
        .cookie-banner {
          left: 1rem;
          right: 1rem;
          width: auto;
          bottom: 1rem;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .cookie-banner {
          transition: none;
        }

        .cookie-banner.cookie-hidden {
          transform: translateY(0);
        }
      }
    </style>
</head>
<body class="main-bg">
    <!-- Sticky Header -->
    <div class="header-sticky shadow-2xl">
    <div class="max-w-7xl mx-auto px-6 py-6">
    <div class="flex items-center justify-between flex-wrap header-content">
    <div class="flex items-center space-x-6 mb-4 md:mb-0">
        <img src="https://cdn.abacus.ai/images/5bf38e3c-f4e1-4450-8d41-277ada1b7069.png"
             alt="DEA Logo" id="homeLogo" class="logo-container" role="button" tabindex="0"
             aria-label="Return to the default dashboard view">
        <div class="flex items-center">
            <h1 class="text-[1.8rem] md:text-[2.2rem] font-bold text-white mb-0 leading-tight">
                <span class="text-sky-100">MiCAR</span>
                <span class="text-sky-50">Tracker</span>
            </h1>
        </div>
    </div>
    <div class="flex items-center nav-buttons">
    <button id="overviewBtn" class="tab-button tab-active px-5 py-3 rounded-xl font-semibold">
    <i class="fas fa-chart-pie mr-2"></i>Overview
    </button>
    <button id="detailsBtn" class="tab-button tab-inactive px-5 py-3 rounded-xl font-semibold">
    <i class="fas fa-table mr-2"></i>EMTs
    </button>
    <button id="nonCompliantBtn" class="tab-button tab-inactive px-5 py-3 rounded-xl font-semibold">
    <i class="fas fa-exclamation-triangle mr-2"></i>Non-Compliant
    </button>
    <button id="caspsBtn" class="tab-button tab-inactive px-5 py-3 rounded-xl font-semibold">
    <i class="fas fa-building-columns mr-2"></i>CASPs
    </button>
    </div>
    </div>
    </div>
    </div>

    <div class="max-w-7xl mx-auto px-6 py-8">
    <div id="sectionIntro" class="mb-6 text-white space-y-4 md:space-y-6">
    <h2 id="sectionTitle" class="text-2xl font-semibold">EMT Issuer Insights</h2>
    <p id="sectionDescription" class="text-blue-100">Key indicators and distributions for licensed Electronic Money Token issuers.</p>
    <div id="caspsIntroKpiContainer" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 fade-in">
    <!-- CASPs KPI cards duplicated for section intro -->
    </div>
    </div>

    <!-- KPI Cards Container - Dynamic -->
    <div id="kpiContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8 fade-in">
    <!-- Will be populated dynamically by JavaScript -->
    </div>

    <!-- Overview Section -->
    <div id="overviewSection" class="fade-in">
    <!-- Charts Row -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <h3 class="text-xl font-bold text-gray-800 mb-4">
    <i class="fas fa-globe-europe text-teal-600 mr-2"></i>EMT Geographic Distribution
    </h3>
    <div class="space-y-4" id="countryChart">
    <!-- Will be populated by JavaScript -->
    </div>
    </div>

    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <h3 class="text-xl font-bold text-gray-800 mb-4">
    <i class="fas fa-university text-blue-600 mr-2"></i>EMT Regulatory Authorities
    </h3>
    <div class="space-y-4" id="authorityChart">
    <!-- Will be populated by JavaScript -->
    </div>
    </div>
    </div>

    <div class="h-px bg-white/30 my-10"></div>

    <div class="mb-6 text-white">
    <h2 id="caspsSectionTitle" class="text-2xl font-semibold">CASPs Insights</h2>
    <p class="text-blue-100">Overview of registered Crypto-Asset Service Providers by country and authority.</p>
    </div>

    <div id="caspsKpiContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mb-8 fade-in">
    <!-- CASPs KPI cards populated dynamically -->
    </div>

    <!-- CASPs Charts Row -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <h3 class="text-xl font-bold text-gray-800 mb-4">
    <i class="fas fa-globe text-teal-600 mr-2"></i>CASP Geographic Distribution
    </h3>
    <div class="space-y-4" id="caspsCountryChart">
    <!-- Will be populated by JavaScript -->
    </div>
    </div>

    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <h3 class="text-xl font-bold text-gray-800 mb-4">
    <i class="fas fa-landmark text-blue-600 mr-2"></i>CASP Competent Authorities
    </h3>
    <div class="space-y-4" id="caspsAuthorityChart">
    <!-- Will be populated by JavaScript -->
    </div>
    </div>
    </div>

    <!-- Currency Distribution -->
    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <h3 class="text-xl font-bold text-gray-800 mb-4">
    <i class="fas fa-coins text-orange-600 mr-2"></i>Currency Distribution Analysis
    </h3>
    <div id="currencyDistribution" class="grid grid-cols-1 md:grid-cols-4 gap-6">
    <!-- Will be populated dynamically by JavaScript -->
    </div>
    </div>
    </div>

    <!-- Details Section -->
    <div id="detailsSection" class="hidden fade-in">
    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
    <h3 class="text-xl font-bold text-gray-800 mb-4 md:mb-0">
    <i class="fas fa-list-alt text-teal-600 mr-2"></i>Detailed Issuer Information
    </h3>
    <div class="flex items-center space-x-4">
    <div class="relative">
    <input type="text" id="searchInput" placeholder="Search issuers, countries, tokens..." 
    class="search-input pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-teal-500 focus:border-transparent w-64">
    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
    </div>
    <button id="clearSearch" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
    <i class="fas fa-times mr-1"></i>Clear
    </button>
    </div>
    </div>
    <div class="overflow-x-auto">
    <table class="w-full">
    <thead>
    <tr class="bg-gradient-to-r from-teal-50 to-blue-50">
    <th class="text-left p-4 font-semibold text-gray-700">Issuer</th>
    <th class="text-left p-4 font-semibold text-gray-700">Country</th>
    <th class="text-left p-4 font-semibold text-gray-700">Authority</th>
    <th class="text-left p-4 font-semibold text-gray-700">Tokens</th>
    <th class="text-center p-4 font-semibold text-gray-700">Count</th>
    <th class="text-center p-4 font-semibold text-gray-700">Currencies</th>
    </tr>
    </thead>
    <tbody id="detailsTable">
    <!-- Will be populated by JavaScript -->
    </tbody>
    </table>
    </div>
    <div id="noResults" class="hidden text-center py-8 text-gray-500">
    <i class="fas fa-search text-4xl mb-4"></i>
    <p class="text-lg">No results found for your search.</p>
    </div>
    </div>
    </div>

    <!-- CASPs Section -->
    <div id="caspsSection" class="hidden fade-in">
    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
    <h3 class="text-xl font-bold text-gray-800 mb-4 md:mb-0">
    <i class="fas fa-building text-teal-600 mr-2"></i>Crypto-Asset Service Providers (CASPs)
    </h3>
    <div class="flex items-center space-x-4">
    <div class="relative">
    <input type="text" id="caspsSearchInput" placeholder="Search CASPs, countries, services..."
    class="search-input pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-teal-500 focus:border-transparent w-64">
    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
    </div>
    <button id="clearCaspsSearch" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
    <i class="fas fa-times mr-1"></i>Clear
    </button>
    </div>
    </div>

    <div class="overflow-x-auto">
    <table class="w-full">
    <thead>
    <tr class="bg-gradient-to-r from-teal-50 to-blue-50">
    <th class="text-left p-4 font-semibold text-gray-700">CASP</th>
    <th class="text-left p-4 font-semibold text-gray-700">Country</th>
    <th class="text-left p-4 font-semibold text-gray-700">Competent Authority</th>
    <th class="text-left p-4 font-semibold text-gray-700">Services</th>
    <th class="text-left p-4 font-semibold text-gray-700">Websites</th>
    </tr>
    </thead>
    <tbody id="caspsTable">
    <!-- Will be populated by JavaScript -->
    </tbody>
    </table>
    </div>
    <div id="noCaspsResults" class="hidden text-center py-8 text-gray-500">
    <i class="fas fa-search text-4xl mb-4"></i>
    <p class="text-lg">No CASPs match your search.</p>
    </div>
    </div>
    </div>

    <!-- Non-Compliant Section -->
    <div id="nonCompliantSection" class="hidden fade-in">
    <div class="bg-white bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-2xl shadow-lg p-6 card-hover">
    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
    <h3 class="text-xl font-bold text-gray-800 mb-4 md:mb-0">
    <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>Non-Compliant Entities
    </h3>
    <div class="flex items-center space-x-4">
    <div class="relative">
    <input type="text" id="nonCompliantSearchInput" placeholder="Search entities, authorities, websites..." 
    class="search-input pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-transparent w-64">
    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
    </div>
    <button id="clearNonCompliantSearch" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
    <i class="fas fa-times mr-1"></i>Clear
    </button>
    </div>
    </div>

    <div class="overflow-x-auto">
    <table class="w-full">
    <thead>
    <tr class="bg-gradient-to-r from-red-50 to-orange-50">
    <th class="text-left p-4 font-semibold text-gray-700">Entity Name</th>
    <th class="text-left p-4 font-semibold text-gray-700">Country</th>
    <th class="text-left p-4 font-semibold text-gray-700">Regulatory Authority</th>
    <th class="text-left p-4 font-semibold text-gray-700">Websites</th>
    <th class="text-center p-4 font-semibold text-gray-700">Status</th>
    </tr>
    </thead>
    <tbody id="nonCompliantTable">
    <!-- Will be populated by JavaScript -->
    </tbody>
    </table>
    </div>
    <div id="noNonCompliantResults" class="hidden text-center py-8 text-gray-500">
    <i class="fas fa-search text-4xl mb-4"></i>
    <p class="text-lg">No results found for your search.</p>
    </div>
    </div>
    </div>
    </div>

    <!-- ==== DEA FOOTER START ==== -->
    <footer class="bg-gray-900 text-gray-200 mt-12">
      <div class="max-w-7xl mx-auto px-4 py-10 space-y-10">

        <!-- â”€â”€ Headline & snapshot date â”€â”€ -->
        <div class="text-center">
          <p class="text-gray-300">
            Digital Euro Association (DEA) MiCAR Tracker â€“ Overview
          </p>
          <p class="text-gray-400 text-sm mt-2" id="currentDate">
            Source: ESMA EMT Register â€“ Data as of 21 October 2025</p>
          <p class="text-gray-400 text-sm" id="caspsDate">Source: ESMA CASPs Register â€“ Data as of 21 October 2025</p>
        </div>

        <!-- â”€â”€ Nav links + social icons â”€â”€ -->
        <div class="flex flex-col md:flex-row md:justify-between gap-8">
          <!-- Nav -->
          <nav>
            <ul class="space-y-2 md:space-y-0 md:flex md:gap-6 text-sm">
              <li><a href="https://home.digital-euro-association.de/legal-notice?hsLang=en"  target="_blank" rel="noopener" class="hover:text-white font-semibold">Legal Notice</a></li>
              <li><a href="https://home.digital-euro-association.de/privacy-policy-0?hsLang=en" target="_blank" rel="noopener" class="hover:text-white font-semibold">Privacy</a></li>
              <li><a href="https://home.digital-euro-association.de/code-of-conduct?hsLang=en"  target="_blank" rel="noopener" class="hover:text-white font-semibold">Code of Conduct</a></li>
              <li><a href="https://home.digital-euro-association.de/faq?hsLang=en"            target="_blank" rel="noopener" class="hover:text-white font-semibold">FAQ</a></li>
              <li><a href="https://home.digital-euro-association.de/impressum?hsLang=en"      target="_blank" rel="noopener" class="hover:text-white font-semibold">Impressum</a></li>
            </ul>
          </nav>

          <!-- Social -->
          <div class="flex items-center gap-6 text-xl">
            <a href="https://x.com/DigiEuro" target="_blank" aria-label="Twitter"  class="hover:text-white"><i class="fab fa-twitter"></i></a>
            <a href="mailto:info@digital-euro-association.de" target="_blank" aria-label="Email" class="hover:text-white"><i class="fas fa-envelope"></i></a>
            <a href="https://www.linkedin.com/company/digital-euro-association/" target="_blank" aria-label="LinkedIn" class="hover:text-white"><i class="fab fa-linkedin"></i></a>
            <a href="https://github.com/DigiEuro/micardashboard" target="_blank" aria-label="GitHub" class="hover:text-white"><i class="fab fa-github"></i></a>
          </div>
        </div>

        <!-- â”€â”€ Bottom row: copyright + CTA â”€â”€ -->
        <div class="border-t border-gray-700 pt-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4">
          <p class="text-xs">&copy; <span id="year"></span> Digital Euro Association e.V.</p>

          <a href="https://digital-euro-association.de"
             class="inline-block bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-5 py-2 rounded-lg shadow transition">
            Learn more about DEA
          </a>
        </div>
      </div>
    </footer>
    <div id="cookieConsent" class="cookie-banner cookie-hidden" role="dialog" aria-live="polite" aria-modal="false" aria-labelledby="cookieTitle" aria-describedby="cookieDescription" aria-hidden="true">
      <button type="button" id="cookieDismiss" class="cookie-close" aria-label="Dismiss cookie notice">
        <span aria-hidden="true">&times;</span>
      </button>
      <div class="cookie-header">
        <div class="cookie-icon" aria-hidden="true">
          <i class="fas fa-cookie-bite"></i>
        </div>
        <h2 id="cookieTitle">Cookie notice</h2>
      </div>
      <p id="cookieDescription">We use essential cookies to keep this dashboard running smoothly. Our privacy-friendly analytics (Umami) operates without cookies.</p>
      <div class="cookie-actions">
        <button type="button" id="cookieAccept" class="cookie-accept">Got it</button>
        <button type="button" id="cookieRemind" class="cookie-dismiss">Remind me later</button>
      </div>
    </div>
    <!-- ==== DEA FOOTER END ==== -->

    <script>
    // Comprehensive European country flags mapping
    const countryFlags = {
        // Current EU Member States
        'Austria': 'ğŸ‡¦ğŸ‡¹',
        'Belgium': 'ğŸ‡§ğŸ‡ª',
        'Bulgaria': 'ğŸ‡§ğŸ‡¬',
        'Croatia': 'ğŸ‡­ğŸ‡·',
        'Cyprus': 'ğŸ‡¨ğŸ‡¾',
        'Czech Republic': 'ğŸ‡¨ğŸ‡¿',
        'Denmark': 'ğŸ‡©ğŸ‡°',
        'Estonia': 'ğŸ‡ªğŸ‡ª',
        'Finland': 'ğŸ‡«ğŸ‡®',
        'France': 'ğŸ‡«ğŸ‡·',
        'Germany': 'ğŸ‡©ğŸ‡ª',
        'Greece': 'ğŸ‡¬ğŸ‡·',
        'Hungary': 'ğŸ‡­ğŸ‡º',
        'Ireland': 'ğŸ‡®ğŸ‡ª',
        'Italy': 'ğŸ‡®ğŸ‡¹',
        'Latvia': 'ğŸ‡±ğŸ‡»',
        'Lithuania': 'ğŸ‡±ğŸ‡¹',
        'Luxembourg': 'ğŸ‡±ğŸ‡º',
        'Malta': 'ğŸ‡²ğŸ‡¹',
        'Netherlands': 'ğŸ‡³ğŸ‡±',
        'Poland': 'ğŸ‡µğŸ‡±',
        'Portugal': 'ğŸ‡µğŸ‡¹',
        'Romania': 'ğŸ‡·ğŸ‡´',
        'Slovakia': 'ğŸ‡¸ğŸ‡°',
        'Slovenia': 'ğŸ‡¸ğŸ‡®',
        'Spain': 'ğŸ‡ªğŸ‡¸',
        'Sweden': 'ğŸ‡¸ğŸ‡ª',

        // EEA Countries (non-EU)
        'Iceland': 'ğŸ‡®ğŸ‡¸',
        'Liechtenstein': 'ğŸ‡±ğŸ‡®',
        'Norway': 'ğŸ‡³ğŸ‡´',

        // Other European Countries
        'Albania': 'ğŸ‡¦ğŸ‡±',
        'Andorra': 'ğŸ‡¦ğŸ‡©',
        'Armenia': 'ğŸ‡¦ğŸ‡²',
        'Azerbaijan': 'ğŸ‡¦ğŸ‡¿',
        'Belarus': 'ğŸ‡§ğŸ‡¾',
        'Bosnia and Herzegovina': 'ğŸ‡§ğŸ‡¦',
        'Georgia': 'ğŸ‡¬ğŸ‡ª',
        'Kazakhstan': 'ğŸ‡°ğŸ‡¿',
        'Kosovo': 'ğŸ‡½ğŸ‡°',
        'Moldova': 'ğŸ‡²ğŸ‡©',
        'Monaco': 'ğŸ‡²ğŸ‡¨',
        'Montenegro': 'ğŸ‡²ğŸ‡ª',
        'North Macedonia': 'ğŸ‡²ğŸ‡°',
        'Russia': 'ğŸ‡·ğŸ‡º',
        'San Marino': 'ğŸ‡¸ğŸ‡²',
        'Serbia': 'ğŸ‡·ğŸ‡¸',
        'Switzerland': 'ğŸ‡¨ğŸ‡­',
        'Turkey': 'ğŸ‡¹ğŸ‡·',
        'Ukraine': 'ğŸ‡ºğŸ‡¦',
        'United Kingdom': 'ğŸ‡¬ğŸ‡§',
        'Vatican City': 'ğŸ‡»ğŸ‡¦',

        // Common alternative names
        'UK': 'ğŸ‡¬ğŸ‡§',
        'Britain': 'ğŸ‡¬ğŸ‡§',
        'Great Britain': 'ğŸ‡¬ğŸ‡§',
        'England': 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿',
        'Scotland': 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿',
        'Wales': 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿',
        'Northern Ireland': 'ğŸ‡¬ğŸ‡§'
    };

    // Currency symbols and information
    const currencyInfo = {
        'EUR': { symbol: 'ğŸ’¶', name: 'Euro', color: 'orange' },
        'USD': { symbol: 'ğŸ’µ', name: 'US Dollar', color: 'coral' },
        'GBP': { symbol: 'ğŸ’·', name: 'British Pound', color: 'purple' },
        'CZK': { symbol: 'ğŸ‡¨ğŸ‡¿', name: 'Czech Koruna', color: 'blue' },
        'HKD': { symbol: 'ğŸ‡­ğŸ‡°', name: 'Hong Kong Dollar', color: 'green' },
        'CHF': { symbol: 'ğŸ‡¨ğŸ‡­', name: 'Swiss Franc', color: 'red' },
        'SEK': { symbol: 'ğŸ‡¸ğŸ‡ª', name: 'Swedish Krona', color: 'yellow' },
        'NOK': { symbol: 'ğŸ‡³ğŸ‡´', name: 'Norwegian Krone', color: 'teal' },
        'DKK': { symbol: 'ğŸ‡©ğŸ‡°', name: 'Danish Krone', color: 'blue' },
        'PLN': { symbol: 'ğŸ‡µğŸ‡±', name: 'Polish Zloty', color: 'red' },
        'HUF': { symbol: 'ğŸ‡­ğŸ‡º', name: 'Hungarian Forint', color: 'green' },
        'RON': { symbol: 'ğŸ‡·ğŸ‡´', name: 'Romanian Leu', color: 'yellow' }
    };

    // KPI card color classes
    const kpiColors = ['kpi-teal', 'kpi-blue', 'kpi-orange', 'kpi-coral', 'kpi-purple', 'kpi-red', 'kpi-green', 'kpi-yellow'];

    // Data - will be updated by the automation script
    const data = [
    {
        "id": 1,
        "issuer": "Circle Internet Financial EU SAS",
        "state": "France",
        "authority": "ACPR",
        "tokens": "EURC, USDC",
        "count": 2,
        "euro": 1,
        "usd": 1,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 2,
        "issuer": "SociÃ©tÃ© GÃ©nÃ©rale â€“ Forge",
        "state": "France",
        "authority": "ACPR",
        "tokens": "EURCV, USDCV",
        "count": 2,
        "euro": 1,
        "usd": 1,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 3,
        "issuer": "Schuman Financial SAS",
        "state": "France",
        "authority": "ACPR",
        "tokens": "EURÃ˜P",
        "count": 1,
        "euro": 1,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 4,
        "issuer": "Paxos",
        "state": "Finland",
        "authority": "FIN-FSA",
        "tokens": "EUROe, eUSD, USDG",
        "count": 3,
        "euro": 1,
        "usd": 2,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 5,
        "issuer": "Eurodollar ApS",
        "state": "Denmark",
        "authority": "Finanstilsynet",
        "tokens": "USDE",
        "count": 1,
        "euro": 0,
        "usd": 1,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 6,
        "issuer": "Banking Circle S.A.",
        "state": "Luxembourg",
        "authority": "CSSF",
        "tokens": "EURI",
        "count": 1,
        "euro": 1,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 7,
        "issuer": "Quantoz Payments B.V.",
        "state": "Netherlands",
        "authority": "Dutch National Bank",
        "tokens": "EURQ, USDQ, EURD",
        "count": 3,
        "euro": 2,
        "usd": 1,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 8,
        "issuer": "StablR Ltd",
        "state": "Malta",
        "authority": "MFSA",
        "tokens": "USDR, EURR",
        "count": 2,
        "euro": 1,
        "usd": 1,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 9,
        "issuer": "Stablemint Ltd",
        "state": "Malta",
        "authority": "MFSA",
        "tokens": "EURsm, USDsm",
        "count": 2,
        "euro": 1,
        "usd": 1,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 10,
        "issuer": "Ambr Payments UAB",
        "state": "Lithuania",
        "authority": "Bank of Lithuania",
        "tokens": "",
        "count": 0,
        "euro": 0,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 11,
        "issuer": "UAB Blue EMI LT",
        "state": "Lithuania",
        "authority": "Bank of Lithuania",
        "tokens": "BLUEUR",
        "count": 1,
        "euro": 1,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 12,
        "issuer": "Stable Europe",
        "state": "Czech Republic",
        "authority": "Czech National Bank",
        "tokens": "CZKI",
        "count": 1,
        "euro": 0,
        "usd": 0,
        "czk": 1,
        "gbp": 0
    },
    {
        "id": 13,
        "issuer": "Fiat Republic Netherlands B.V.",
        "state": "Netherlands",
        "authority": "Dutch National Bank",
        "tokens": "ENEUR, ENGBP, ENUSD",
        "count": 3,
        "euro": 1,
        "usd": 1,
        "czk": 0,
        "gbp": 1
    },
    {
        "id": 14,
        "issuer": "AllUnity GmbH",
        "state": "Germany",
        "authority": "BaFin",
        "tokens": "EURAU",
        "count": 1,
        "euro": 1,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 15,
        "issuer": "Alipay (Europe) Limited S.A.",
        "state": "Luxembourg",
        "authority": "CSSF",
        "tokens": "BREUR",
        "count": 1,
        "euro": 1,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 16,
        "issuer": "Oddo BHF",
        "state": "France",
        "authority": "ACPR",
        "tokens": "EUROD",
        "count": 1,
        "euro": 1,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    },
    {
        "id": 17,
        "issuer": "StaBillon sp. z o.o.",
        "state": "Poland",
        "authority": "KNF",
        "tokens": "",
        "count": 0,
        "euro": 0,
        "usd": 0,
        "czk": 0,
        "gbp": 0
    }
];

    const caspsData = [
    {
        "id": 1,
        "name": "Bybit EU GmbH",
        "authority": "FMA",
        "memberState": "Austria",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "placing",
            "transfer"
        ],
        "websites": [
            "https://www.bybit.eu"
        ]
    },
    {
        "id": 2,
        "name": "Bitpanda GmbH",
        "authority": "FMA",
        "memberState": "Austria",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://www.bitpanda.com"
        ]
    },
    {
        "id": 3,
        "name": "Cryptonow GmbH",
        "authority": "FMA",
        "memberState": "Austria",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "https://www.cryptonow.at"
        ]
    },
    {
        "id": 4,
        "name": "eToro (Europe) Ltd",
        "authority": "CySEC",
        "memberState": "Cyprus",
        "services": [
            "custody",
            "exchange funds",
            "execution",
            "RTO",
            "advice",
            "portfolio mgmt"
        ],
        "websites": [
            "www.etoro.com"
        ]
    },
    {
        "id": 5,
        "name": "COLLECT & EXCHANGE CY LTD",
        "authority": "CySEC",
        "memberState": "Cyprus",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "https://collectnexchange.cy/"
        ]
    },
    {
        "id": 6,
        "name": "Trading 212 Markets Ltd",
        "authority": "CySEC",
        "memberState": "Cyprus",
        "services": [
            "custody",
            "exchange funds",
            "execution",
            "RTO"
        ],
        "websites": [
            "www.trading212.com"
        ]
    },
    {
        "id": 7,
        "name": "Crypto Finance (Deutschland) GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "transfer"
        ],
        "websites": [
            "www.crypto-finance.com/germany/de"
        ]
    },
    {
        "id": 8,
        "name": "Bitpanda Asset Management GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "www.bitpanda.com"
        ]
    },
    {
        "id": 9,
        "name": "360 Treasury Systems AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "trading platform"
        ],
        "websites": [
            "www.360t.com"
        ]
    },
    {
        "id": 10,
        "name": "Commerzbank Aktiengesellschaft",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "transfer"
        ],
        "websites": [
            "https://www.commerzbank.de"
        ]
    },
    {
        "id": 11,
        "name": "Baden-WÃ¼rttembergische WertpapierbÃ¶rse GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "trading platform"
        ],
        "websites": [
            "https://www.bsdex.de/de"
        ]
    },
    {
        "id": 12,
        "name": "Smartbroker AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "RTO"
        ],
        "websites": [
            "https://www.smartbrokerplus.de/de-de"
        ]
    },
    {
        "id": 13,
        "name": "Tangany GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "transfer"
        ],
        "websites": [
            "www.tangany.com"
        ]
    },
    {
        "id": 14,
        "name": "Boerse Stuttgart Digital Custody GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "transfer"
        ],
        "websites": [
            "www.bsdigital.com"
        ]
    },
    {
        "id": 15,
        "name": "Bullish Europe GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "transfer"
        ],
        "websites": [
            "https://bullish.com/home-de"
        ]
    },
    {
        "id": 16,
        "name": "EUWAX AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "exchange funds",
            "exchange crypto"
        ],
        "websites": [
            "www.euwax-ag.de"
        ]
    },
    {
        "id": 17,
        "name": "flatexDEGIRO Bank AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "execution"
        ],
        "websites": [
            "https://flatexdegiro.com/de"
        ]
    },
    {
        "id": 18,
        "name": "Baader Bank Aktiengesellschaft",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "execution"
        ],
        "websites": [
            "https://www.baaderbank.de"
        ]
    },
    {
        "id": 19,
        "name": "Trade Republic Bank GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://traderepublic.com"
        ]
    },
    {
        "id": 20,
        "name": "BitGo Europe GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://www.bitgo.de/entities/bitgoeuropegmbh"
        ]
    },
    {
        "id": 21,
        "name": "Traders Place GmbH & Co. KGaA",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "RTO"
        ],
        "websites": [
            "https://tradersplace.de"
        ]
    },
    {
        "id": 22,
        "name": "Tradias GmbH",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "transfer"
        ],
        "websites": [
            "www.tradias.de"
        ]
    },
    {
        "id": 23,
        "name": "Dietrich & Richter Private Asset Management AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "advice",
            "portfolio mgmt"
        ],
        "websites": [
            "https://www.drpam.de"
        ]
    },
    {
        "id": 24,
        "name": "N26 Bank SE",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "RTO"
        ],
        "websites": [
            "https://n26.com"
        ]
    },
    {
        "id": 25,
        "name": "V-Bank AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "custody",
            "execution",
            "transfer"
        ],
        "websites": [
            "https://www.v-bank.com/"
        ]
    },
    {
        "id": 26,
        "name": "Bankhaus Scheich Wertpapierspezialist AG",
        "authority": "BaFin",
        "memberState": "Germany",
        "services": [
            "exchange funds"
        ],
        "websites": [
            "www.bankhaus-scheich.de"
        ]
    },
    {
        "id": 27,
        "name": "OPEN BANK S.A.",
        "authority": "CNMV",
        "memberState": "Spain",
        "services": [
            "custody",
            "execution"
        ],
        "websites": [
            "www.openbank.es"
        ]
    },
    {
        "id": 28,
        "name": "Banco Bilbao Vizcaya Argentaria S.A.",
        "authority": "CNMV",
        "memberState": "Spain",
        "services": [
            "custody",
            "execution",
            "transfer"
        ],
        "websites": [
            "www.bbva.es"
        ]
    },
    {
        "id": 29,
        "name": "CECABANK S.A.",
        "authority": "CNMV",
        "memberState": "Spain",
        "services": [
            "custody",
            "RTO",
            "transfer"
        ],
        "websites": [
            "www.cecabank.es"
        ]
    },
    {
        "id": 30,
        "name": "Coinmotion Oy",
        "authority": "FIN-FSA",
        "memberState": "Finland",
        "services": [
            "custody",
            "exchange funds",
            "execution",
            "transfer"
        ],
        "websites": [
            "https://coinmotion.com"
        ]
    },
    {
        "id": 31,
        "name": "Tesseract Investment Oy",
        "authority": "FIN-FSA",
        "memberState": "Finland",
        "services": [
            "custody",
            "trading platform",
            "advice",
            "portfolio mgmt",
            "transfer"
        ],
        "websites": [
            "https://tesseract.fi"
        ]
    },
    {
        "id": 32,
        "name": "Bittimaatti Oy",
        "authority": "FIN-FSA",
        "memberState": "Finland",
        "services": [
            "exchange funds"
        ],
        "websites": [
            "https://bittimaatti.fi"
        ]
    },
    {
        "id": 33,
        "name": "CACEIS BANK",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "custody",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://www.caceis.com/"
        ]
    },
    {
        "id": 34,
        "name": "COINSHARES ASSET MANAGEMENT",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "advice",
            "portfolio mgmt"
        ],
        "websites": [
            "https://coinshares.com"
        ]
    },
    {
        "id": 35,
        "name": "BITSTACK SAS",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "transfer"
        ],
        "websites": [
            "https://bitstack-app.com"
        ]
    },
    {
        "id": 36,
        "name": "METAL GEAR SAS",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "custody",
            "exchange funds",
            "execution",
            "transfer"
        ],
        "websites": [
            "https://metalgear.xyz"
        ]
    },
    {
        "id": 37,
        "name": "DEBLOCK SAS",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "exchange funds",
            "exchange crypto",
            "execution"
        ],
        "websites": [
            "https://deblock.com"
        ]
    },
    {
        "id": 38,
        "name": "GOin SAS",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "advice",
            "portfolio mgmt",
            "transfer"
        ],
        "websites": [
            "https://goin-invest.com"
        ]
    },
    {
        "id": 39,
        "name": "FINCTEK UE SAS",
        "authority": "AMF",
        "memberState": "France",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "transfer"
        ],
        "websites": [
            "https://finctek.com"
        ]
    },
    {
        "id": 40,
        "name": "Payward Global Solutions Limited",
        "authority": "CBI",
        "memberState": "Ireland",
        "services": [
            "trading platform"
        ],
        "websites": [
            "https://www.kraken.com"
        ]
    },
    {
        "id": 41,
        "name": "Payward Europe Solutions Limited",
        "authority": "CBI",
        "memberState": "Ireland",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "RTO",
            "portfolio mgmt",
            "transfer"
        ],
        "websites": [
            "https://www.kraken.com"
        ]
    },
    {
        "id": 42,
        "name": "Legend Financial Ireland Limited",
        "authority": "CBI",
        "memberState": "Ireland",
        "services": [
            "exchange funds",
            "exchange crypto"
        ],
        "websites": [
            "www.legendtrading.com"
        ]
    },
    {
        "id": 43,
        "name": "Robinhood Europe UAB",
        "authority": "LSC",
        "memberState": "Lithuania",
        "services": [
            "custody",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://www.robinhood.com"
        ]
    },
    {
        "id": 44,
        "name": "Bitstamp Europe S.A.",
        "authority": "CSSF",
        "memberState": "Luxembourg",
        "services": [
            "custody",
            "trading platform",
            "exchange funds",
            "exchange crypto",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://www.bitstamp.net"
        ]
    },
    {
        "id": 45,
        "name": "Clearstream Banking S.A.",
        "authority": "CSSF",
        "memberState": "Luxembourg",
        "services": [
            "custody"
        ],
        "websites": [
            "https://www.clearstream.com/clearstream-en"
        ]
    },
    {
        "id": 46,
        "name": "Coinbase Luxembourg S.A.",
        "authority": "CSSF",
        "memberState": "Luxembourg",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://www.coinbase.com"
        ]
    },
    {
        "id": 47,
        "name": "Altarius Asset Management Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "RTO",
            "portfolio mgmt"
        ],
        "websites": [
            "www.altariusgroup.com"
        ]
    },
    {
        "id": 48,
        "name": "Gemini Intergalactic EU Ltd",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "RTO",
            "transfer"
        ],
        "websites": [
            "www.gemini.com"
        ]
    },
    {
        "id": 49,
        "name": "Foris DAX MT Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "crypto.com"
        ]
    },
    {
        "id": 50,
        "name": "Zillion Bits Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "trading platform",
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "RTO",
            "transfer"
        ],
        "websites": [
            "www.zbx.com"
        ]
    },
    {
        "id": 51,
        "name": "BP23 CA Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "www.bitpanda.com"
        ]
    },
    {
        "id": 52,
        "name": "OKCoin Europe Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "trading platform",
            "exchange funds",
            "exchange crypto",
            "execution",
            "placing",
            "RTO",
            "portfolio mgmt",
            "transfer"
        ],
        "websites": [
            "www.okx.com"
        ]
    },
    {
        "id": 53,
        "name": "Socios Europe Services Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "www.socios.com"
        ]
    },
    {
        "id": 54,
        "name": "Gate Technology Limited",
        "authority": "MFSA",
        "memberState": "Malta",
        "services": [
            "custody",
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "www.gate.mt"
        ]
    },
    {
        "id": 55,
        "name": "Amdax B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "execution",
            "portfolio mgmt",
            "transfer"
        ],
        "websites": [
            "https://www.amdax.com/nl"
        ]
    },
    {
        "id": 56,
        "name": "BTC Direct Europe B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "exchange funds",
            "transfer"
        ],
        "websites": [
            "https://my.btcdirect.eu"
        ]
    },
    {
        "id": 57,
        "name": "Finst B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "execution",
            "RTO",
            "transfer"
        ],
        "websites": [
            "https://finst.com/"
        ]
    },
    {
        "id": 58,
        "name": "BitStaete B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "portfolio mgmt"
        ],
        "websites": [
            "https://bitstaete.nl"
        ]
    },
    {
        "id": 59,
        "name": "Decubate B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "execution",
            "placing"
        ],
        "websites": [
            "https://www.decubate.com"
        ]
    },
    {
        "id": 60,
        "name": "Hidden Road Partners CIV NL B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "exchange funds",
            "exchange crypto",
            "execution"
        ],
        "websites": [
            "https://hiddenroad.com"
        ]
    },
    {
        "id": 61,
        "name": "MoonPay Europe B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "https://www.moonpay.com"
        ]
    },
    {
        "id": 62,
        "name": "Zebedee Europe B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "exchange funds",
            "transfer"
        ],
        "websites": [
            "https://zbd.gg"
        ]
    },
    {
        "id": 63,
        "name": "Fiat Republic Netherlands B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "transfer"
        ],
        "websites": [
            "https://fiatrepublic.com"
        ]
    },
    {
        "id": 64,
        "name": "Vivid Money B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "RTO"
        ],
        "websites": [
            "https://vivid.money"
        ]
    },
    {
        "id": 65,
        "name": "AvianLabs Netherlands B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "https://sling.money"
        ]
    },
    {
        "id": 66,
        "name": "Bitvavo B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "trading platform",
            "transfer"
        ],
        "websites": [
            "https://bitvavo.com/nl"
        ]
    },
    {
        "id": 67,
        "name": "Acheron Europe B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "execution",
            "advice",
            "portfolio mgmt",
            "transfer"
        ],
        "websites": [
            "https://www.acherontrading.com"
        ]
    },
    {
        "id": 68,
        "name": "One Trading Exchange B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "trading platform"
        ],
        "websites": [
            "https://www.onetrading.com"
        ]
    },
    {
        "id": 69,
        "name": "BLOX B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "custody",
            "exchange funds",
            "transfer"
        ],
        "websites": [
            "https://weareblox.com/"
        ]
    },
    {
        "id": 70,
        "name": "EU Internet Ventures B.V.",
        "authority": "AFM",
        "memberState": "Netherlands",
        "services": [
            "exchange funds",
            "exchange crypto",
            "transfer"
        ],
        "websites": [
            "https://banxa.com"
        ]
    },
    {
        "id": 71,
        "name": "Ilirika",
        "authority": "ATVP",
        "memberState": "Slovenia",
        "services": [
            "custody",
            "execution",
            "RTO",
            "portfolio mgmt"
        ],
        "websites": [
            "https://www.ilirika.si/"
        ]
    }
];

    // Non-compliant entities data
    const nonCompliantData = [
    {
        "id": 1,
        "entity": "Dobibo",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://dobibo.com",
            "https://dobibo1.com",
            "https://dobibo2.com"
        ],
        "isNew": false
    },
    {
        "id": 2,
        "entity": "Fameexn",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://fameexn.top",
            "https://fameexn.com"
        ],
        "isNew": false
    },
    {
        "id": 3,
        "entity": "Spazio Finanziario",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "www.spaziofinanziario.com"
        ],
        "isNew": false
    },
    {
        "id": 4,
        "entity": "HTXcoin-az",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://m.htxcoin-az.com"
        ],
        "isNew": false
    },
    {
        "id": 5,
        "entity": "Stock Credit Wallet",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://stockcreditwallet.com"
        ],
        "isNew": false
    },
    {
        "id": 6,
        "entity": "Paycraftv.top - Paycraftn.top",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://paycraftv.top",
            "https://paycraftn.top"
        ],
        "isNew": false
    },
    {
        "id": 7,
        "entity": "CoinBank Exchange",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://coinbankexchange.icu"
        ],
        "isNew": false
    },
    {
        "id": 8,
        "entity": "AKQ",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://akqa715.it",
            "https://AKQ1181.it"
        ],
        "isNew": false
    },
    {
        "id": 9,
        "entity": "Fameexn",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://fameexe.top",
            "https://fameexj.top"
        ],
        "isNew": false
    },
    {
        "id": 10,
        "entity": "ArgonInternational",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://argonintgroup.com",
            "https://cfd.argonintgroup.com"
        ],
        "isNew": false
    },
    {
        "id": 11,
        "entity": "Deroka UAB",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://dtcoin.tech",
            "https://dtwallet.io",
            "https://forcedmarketcap.tech"
        ],
        "isNew": false
    },
    {
        "id": 12,
        "entity": "DTSocialize Holding PLC",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://dtsmoney.com",
            "https://portal.dtsmoney.com"
        ],
        "isNew": false
    },
    {
        "id": 13,
        "entity": "Caa871",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://caa871.it"
        ],
        "isNew": false
    },
    {
        "id": 14,
        "entity": "Sdf837",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://sdf837.it"
        ],
        "isNew": false
    },
    {
        "id": 15,
        "entity": "SYBZ",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://sybzgroup.co"
        ],
        "isNew": false
    },
    {
        "id": 16,
        "entity": "Egplus.vip",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://egplus.vip"
        ],
        "isNew": false
    },
    {
        "id": 17,
        "entity": "Egalite.bond",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://egalite.bond"
        ],
        "isNew": false
    },
    {
        "id": 18,
        "entity": "Arbismart UAB",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://arbismart.com",
            "https://dashboard.arbismart.com"
        ],
        "isNew": false
    },
    {
        "id": 19,
        "entity": "Blockbyteq",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://blockbyteq.top"
        ],
        "isNew": false
    },
    {
        "id": 20,
        "entity": "Bvoxed",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://bvoxed.com"
        ],
        "isNew": false
    },
    {
        "id": 21,
        "entity": "BeratCoin",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://btc6688.com"
        ],
        "isNew": false
    },
    {
        "id": 22,
        "entity": "Interersos-Interesosf",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://interersosf.org",
            "https://interersos.org"
        ],
        "isNew": false
    },
    {
        "id": 23,
        "entity": "Cfw896",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://cfw896.it"
        ],
        "isNew": false
    },
    {
        "id": 24,
        "entity": "Lumex",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://stratoslumex.com",
            "https://stratoslumex.net"
        ],
        "isNew": false
    },
    {
        "id": 25,
        "entity": "Tmxa",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://60yg.com"
        ],
        "isNew": false
    },
    {
        "id": 26,
        "entity": "Uyr968|Fwq367",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://uyr968.it",
            "https://fwq367.it"
        ],
        "isNew": false
    },
    {
        "id": 27,
        "entity": "Syk755",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "www.syk755.it"
        ],
        "isNew": false
    },
    {
        "id": 28,
        "entity": "Pxm266",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://pxm266.it"
        ],
        "isNew": false
    },
    {
        "id": 29,
        "entity": "Hct685",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://hct685.it"
        ],
        "isNew": false
    },
    {
        "id": 30,
        "entity": "Sdh878",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://sdh878.it"
        ],
        "isNew": false
    },
    {
        "id": 31,
        "entity": "Skillnexp",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://skillnexp.top"
        ],
        "isNew": false
    },
    {
        "id": 32,
        "entity": "Ymg686",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://ymg686.it"
        ],
        "isNew": false
    },
    {
        "id": 33,
        "entity": "Coingridr.top",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://coingridr.top"
        ],
        "isNew": false
    },
    {
        "id": 34,
        "entity": "Gigtaskr",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://gigtaskr.top"
        ],
        "isNew": false
    },
    {
        "id": 35,
        "entity": "Sxr922",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://sxr922.it"
        ],
        "isNew": false
    },
    {
        "id": 36,
        "entity": "09pqws",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://09pqws.it"
        ],
        "isNew": false
    },
    {
        "id": 37,
        "entity": "DSS776",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://dss776.it"
        ],
        "isNew": false
    },
    {
        "id": 38,
        "entity": "ERY357",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://ery357.it"
        ],
        "isNew": false
    },
    {
        "id": 39,
        "entity": "TNT882",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://tnt882.it"
        ],
        "isNew": false
    },
    {
        "id": 40,
        "entity": "ZeroTrillionWorld",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://zerotrillionworld.it"
        ],
        "isNew": false
    },
    {
        "id": 41,
        "entity": "ZGV796",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://zgv796.it"
        ],
        "isNew": false
    },
    {
        "id": 42,
        "entity": "78DEF",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://78def.it"
        ],
        "isNew": false
    },
    {
        "id": 43,
        "entity": "Atomic Wallet",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://atomicwallet.io"
        ],
        "isNew": false
    },
    {
        "id": 44,
        "entity": "Cexrqw.com",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://cexrqw.com"
        ],
        "isNew": false
    },
    {
        "id": 45,
        "entity": "Interersos.it",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://interersos.it"
        ],
        "isNew": false
    },
    {
        "id": 46,
        "entity": "YUI236",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://yui236.it"
        ],
        "isNew": false
    },
    {
        "id": 47,
        "entity": "DRST78",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://drst78.it"
        ],
        "isNew": false
    },
    {
        "id": 48,
        "entity": "GDY733",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://gdy733.it"
        ],
        "isNew": false
    },
    {
        "id": 49,
        "entity": "XUR652",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://xur652.it"
        ],
        "isNew": false
    },
    {
        "id": 50,
        "entity": "YZA335",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://yza335.it"
        ],
        "isNew": false
    },
    {
        "id": 51,
        "entity": "BHP536",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://bhp536.it"
        ],
        "isNew": false
    },
    {
        "id": 52,
        "entity": "MJU567",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://mju567.it"
        ],
        "isNew": false
    },
    {
        "id": 53,
        "entity": "TNT788",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://tnt788.it"
        ],
        "isNew": false
    },
    {
        "id": 54,
        "entity": "YTT975",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://ytt975.it"
        ],
        "isNew": false
    },
    {
        "id": 55,
        "entity": "YQZ585",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://yqz585.it"
        ],
        "isNew": false
    },
    {
        "id": 56,
        "entity": "EWQ778",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://ewq778.it"
        ],
        "isNew": false
    },
    {
        "id": 57,
        "entity": "AWE818",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://awe818.it"
        ],
        "isNew": false
    },
    {
        "id": 58,
        "entity": "GRT325",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://grt325.it"
        ],
        "isNew": false
    },
    {
        "id": 59,
        "entity": "TUT551",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://tut551.it"
        ],
        "isNew": false
    },
    {
        "id": 60,
        "entity": "SFS854",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://sfs854.it"
        ],
        "isNew": false
    },
    {
        "id": 61,
        "entity": "12DEF",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://12def.it"
        ],
        "isNew": false
    },
    {
        "id": 62,
        "entity": "YTH937",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://yth937.it"
        ],
        "isNew": false
    },
    {
        "id": 63,
        "entity": "C7VIZ",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://c7viz.it"
        ],
        "isNew": false
    },
    {
        "id": 64,
        "entity": "Spazio Finanziario",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "www.spaziofinanziario.pro",
            "https://clients.spaziofinanziario.pro"
        ],
        "isNew": false
    },
    {
        "id": 65,
        "entity": "Ynln.com",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "www.ynln.com"
        ],
        "isNew": false
    },
    {
        "id": 66,
        "entity": "NETWORK CAPITAL LTD",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://network-capital-partners.com",
            "https://web.networkcapital-partnersltd.com"
        ],
        "isNew": false
    },
    {
        "id": 67,
        "entity": "Lucrumiagroup.co",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://lucrumiagroup.co"
        ],
        "isNew": false
    },
    {
        "id": 68,
        "entity": "Dobibo",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://dbbddrb.com"
        ],
        "isNew": false
    },
    {
        "id": 69,
        "entity": "Jzmor",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "www.jzmor.com",
            "www.jzmor-it57659.com",
            "www.jzmor-it33583.com",
            "www.jzmor-it99518.com",
            "www.jzmor-it52337.com"
        ],
        "isNew": false
    },
    {
        "id": 70,
        "entity": "ZZCoin",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://zzcoingy.com"
        ],
        "isNew": true
    },
    {
        "id": 71,
        "entity": "Ofuyc",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "www.ofuyc.com",
            "www.ofuyc-32516it.com",
            "www.ofuyc-55337it.com",
            "www.ofuyc-23166it.com",
            "www.ofuyc-33111it.com",
            "www.ofuyc-83255it.com"
        ],
        "isNew": true
    },
    {
        "id": 72,
        "entity": "Veltrixmax-invest.com - Ayquozeber.com",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://veltrixmax-invest.com",
            "https://ayquozeber.com"
        ],
        "isNew": true
    },
    {
        "id": 73,
        "entity": "Orolonix-invest.com - Cyberirfy.icu",
        "country": "Italy",
        "authority": "Commissione Nazionale per le Societa e la Borsa (CONSOB)",
        "websites": [
            "https://orolonix-invest.com",
            "https://cyberirfy.icu"
        ],
        "isNew": true
    },
    {
        "id": 74,
        "entity": "MEXC Global",
        "country": "Netherlands",
        "authority": "Netherlands Authority for the Financial Markets (AFM)",
        "websites": [
            "https://www.mexc.com/"
        ],
        "isNew": false
    },
    {
        "id": 75,
        "entity": "LWEX",
        "country": "Slovakia",
        "authority": "National Bank of Slovakia (NBS)",
        "websites": [
            "https://lwex.com/"
        ],
        "isNew": false
    }
];

    let filteredData = [...data];
    let filteredCaspsData = [...caspsData];
    let filteredNonCompliantData = [...nonCompliantData];

    const sectionTitleEl = document.getElementById('sectionTitle');
    const sectionDescriptionEl = document.getElementById('sectionDescription');
    const kpiContainerEl = document.getElementById('kpiContainer');
    const caspsIntroKpiContainerEl = document.getElementById('caspsIntroKpiContainer');

    const sectionIntroConfig = {
        overview: {
            title: 'EMT Issuer Insights',
            description: 'Key indicators and distributions for licensed Electronic Money Token issuers.',
            showKpis: true
        },
        details: {
            title: 'EMT Issuer Details',
            description: 'Explore detailed records for each Electronic Money Token issuer authorised under MiCAR.',
            showKpis: true
        },
        casps: {
            title: 'CASPs Overview',
            description: 'Discover authorised Crypto-Asset Service Providers and the services they offer across Europe.',
            showKpis: false
        },
        nonCompliant: {
            title: 'Non-Compliant Entities',
            description: 'Monitor entities flagged by European regulators for non-compliant activity.',
            showKpis: false
        }
    };

    function updateSectionIntro(tab) {
        const config = sectionIntroConfig[tab] || sectionIntroConfig.overview;

        if (sectionTitleEl) {
            sectionTitleEl.textContent = config.title;
        }

        if (sectionDescriptionEl) {
            if (config.description) {
                sectionDescriptionEl.textContent = config.description;
                sectionDescriptionEl.classList.remove('hidden');
            } else {
                sectionDescriptionEl.textContent = '';
                sectionDescriptionEl.classList.add('hidden');
            }
        }

        if (kpiContainerEl) {
            if (config.showKpis) {
                kpiContainerEl.classList.remove('hidden');
            } else {
                kpiContainerEl.classList.add('hidden');
            }
        }

        if (caspsIntroKpiContainerEl) {
            if (tab === 'casps') {
                caspsIntroKpiContainerEl.classList.remove('hidden');
            } else {
                caspsIntroKpiContainerEl.classList.add('hidden');
            }
        }
    }

    // Dynamic calculation functions
    function calculateCurrencyTotals() {
        const currencies = {};

        // Get all currency columns from data (excluding standard fields)
        const standardFields = ['id', 'issuer', 'state', 'authority', 'tokens', 'count'];
        const currencyFields = Object.keys(data[0] || {}).filter(key => !standardFields.includes(key));

        currencyFields.forEach(currency => {
            const total = data.reduce((sum, item) => sum + (item[currency] || 0), 0);
            if (total > 0) {
                currencies[currency.toUpperCase()] = total;
            }
        });

        return currencies;
    }

    function generateKPICards() {
        const container = document.getElementById('kpiContainer');
        const currencies = calculateCurrencyTotals();

        // Base KPI cards
        const baseKPIs = [
            {
                title: 'Total Issuers',
                value: data.length,
                subtitle: 'Active EMT Providers',
                icon: 'ğŸ¢',
                color: 'kpi-teal'
            },
            {
                title: 'Total Tokens',
                value: data.reduce((sum, item) => sum + item.count, 0),
                subtitle: 'Authorized EMTs',
                icon: 'ğŸª™',
                color: 'kpi-blue'
            }
        ];

        // Currency KPI cards
        const currencyKPIs = Object.entries(currencies).map(([currency, count], index) => {
            const info = currencyInfo[currency] || { symbol: 'ğŸ’¶', name: currency, color: 'teal' };
            return {
                title: `${currency} Tokens`,
                value: count,
                subtitle: `${info.name}-backed`,
                icon: info.symbol,
                color: kpiColors[(index + 2) % kpiColors.length]
            };
        });

        // Non-compliant KPI
        const nonCompliantKPI = {
            title: 'Non-Compliant',
            value: nonCompliantData.length,
            subtitle: 'Flagged Entities',
            icon: 'âš ï¸',
            color: 'kpi-red'
        };

        const allKPIs = [...baseKPIs, ...currencyKPIs, nonCompliantKPI];

        // Adjust grid columns based on number of KPIs
        const gridCols = Math.min(allKPIs.length, 6);
        container.className = `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${gridCols} gap-6 mb-8 fade-in`;

        container.innerHTML = allKPIs.map(kpi => `
            <div class="kpi-card ${kpi.color} p-6 rounded-2xl shadow-lg text-white card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm opacity-90 font-medium">${kpi.title}</p>
                        <p class="text-3xl font-bold mt-2">${kpi.value}</p>
                        <p class="text-sm opacity-80 mt-1">${kpi.subtitle}</p>
                    </div>
                    <div class="text-4xl opacity-80">${kpi.icon}</div>
                </div>
            </div>
        `).join('');
    }

    function buildCaspsKpiCards(dataToShow) {
        const totalProviders = dataToShow.length;
        const normalizedCountries = dataToShow.map(item => {
            const country = (item.memberState || '').trim();
            return country.length > 0 ? country : 'Unknown';
        });
        const uniqueCountries = new Set(normalizedCountries.map(country => country.toLowerCase()));
        const totalCountries = normalizedCountries.length > 0 ? uniqueCountries.size : 0;

        return `
            <div class="kpi-card kpi-teal p-6 rounded-2xl shadow-lg text-white card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm opacity-90 font-medium">Total Providers</p>
                        <p class="text-3xl font-bold mt-2">${totalProviders}</p>
                        <p class="text-sm opacity-80 mt-1">Registered CASP Providers</p>
                    </div>
                    <div class="text-4xl opacity-80">ğŸ¢</div>
                </div>
            </div>
            <div class="kpi-card kpi-blue p-6 rounded-2xl shadow-lg text-white card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm opacity-90 font-medium">Total Countries</p>
                        <p class="text-3xl font-bold mt-2">${totalCountries}</p>
                        <p class="text-sm opacity-80 mt-1">Countries Represented</p>
                    </div>
                    <div class="text-4xl opacity-80">ğŸŒ</div>
                </div>
            </div>
        `;
    }

    function updateCaspsKpis(dataToShow = filteredCaspsData) {
        const container = document.getElementById('caspsKpiContainer');
        const introContainer = document.getElementById('caspsIntroKpiContainer');

        const cardsHtml = buildCaspsKpiCards(dataToShow);

        if (container) {
            container.innerHTML = cardsHtml;
        }

        if (introContainer) {
            introContainer.innerHTML = cardsHtml;
        }
    }

    function generateCurrencyDistribution() {
        const container = document.getElementById('currencyDistribution');
        const currencies = calculateCurrencyTotals();
        const totalTokens = Object.values(currencies).reduce((sum, count) => sum + count, 0);

        container.innerHTML = Object.entries(currencies).map(([currency, count]) => {
            const info = currencyInfo[currency] || { symbol: 'ğŸ’¶', name: currency };
            const percentage = ((count / totalTokens) * 100).toFixed(1);

            return `
                <div class="text-center p-6 bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl currency-card">
                    <div class="text-4xl mb-3">${info.symbol}</div>
                    <div class="text-2xl font-bold text-teal-600">${count}</div>
                    <div class="text-gray-600">${currency} Tokens</div>
                    <div class="text-sm text-gray-500 mt-2">${percentage}% of total</div>
                </div>
            `;
        }).join('');
    }

    // Calculate aggregated data
    const totalIssuers = data.length;
    const totalTokens = data.reduce((sum, item) => sum + item.count, 0);
    const nonCompliantCount = nonCompliantData.length;

    // Country and authority distributions (sorted by count descending)
    const countryData = Object.entries(data.reduce((acc, item) => {
        acc[item.state] = (acc[item.state] || 0) + 1;
        return acc;
    }, {})).sort((a, b) => b[1] - a[1]);

    const authorityData = Object.entries(data.reduce((acc, item) => {
        acc[item.authority] = (acc[item.authority] || 0) + 1;
        return acc;
    }, {})).sort((a, b) => b[1] - a[1]);

    const caspsCountryData = Object.entries(caspsData.reduce((acc, item) => {
        const country = item.memberState || 'Unknown';
        acc[country] = (acc[country] || 0) + 1;
        return acc;
    }, {})).sort((a, b) => b[1] - a[1]);

    const caspsAuthorityData = Object.entries(caspsData.reduce((acc, item) => {
        const authority = item.authority || 'Unknown';
        acc[authority] = (acc[authority] || 0) + 1;
        return acc;
    }, {})).sort((a, b) => b[1] - a[1]);

    // === Shrink header on scroll ===
    window.addEventListener('scroll', () => {
      const header = document.querySelector('.header-sticky');
      if (window.scrollY > 20) {
        header.classList.add('shrink');
      } else {
        header.classList.remove('shrink');
      }
    });
    // Initialize dashboard
    function initDashboard() {
        updateSectionIntro('overview');
        // Generate dynamic components
        generateKPICards();
        generateCurrencyDistribution();

        // Populate charts and tables
        populateCountryChart();
        populateAuthorityChart();
        populateCaspsCountryChart();
        populateCaspsAuthorityChart();
        populateDetailsTable();
        populateCaspsTable();
        populateNonCompliantTable();
    }

    function populateCountryChart() {
        const container = document.getElementById('countryChart');
        const maxCount = countryData[0][1]; // First item has highest count due to sorting

        container.innerHTML = countryData.map(([country, count]) => `
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <span class="text-xl">${countryFlags[country] || 'ğŸ³ï¸'}</span>
                    <span class="text-gray-700 font-medium">${country}</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-32 bg-gray-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-teal-500 to-blue-600 h-3 rounded-full progress-bar" 
                             style="width: ${(count / maxCount) * 100}%"></div>
                    </div>
                    <span class="text-teal-600 font-bold text-lg">${count}</span>
                </div>
            </div>
        `).join('');
    }

    function populateAuthorityChart() {
        const container = document.getElementById('authorityChart');
        const maxCount = authorityData[0][1]; // First item has highest count due to sorting

        container.innerHTML = authorityData.map(([authority, count]) => `
            <div class="flex items-center justify-between">
                <span class="text-gray-700 font-medium text-sm">${authority}</span>
                <div class="flex items-center space-x-3">
                    <div class="w-32 bg-gray-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-teal-500 to-blue-600 h-3 rounded-full progress-bar"
                             style="width: ${(count / maxCount) * 100}%"></div>
                    </div>
                    <span class="text-teal-600 font-bold text-lg">${count}</span>
                </div>
            </div>
        `).join('');
    }

    function populateCaspsCountryChart() {
        const container = document.getElementById('caspsCountryChart');

        if (!container) {
            return;
        }

        if (caspsCountryData.length === 0) {
            container.innerHTML = '<p class="text-gray-500 text-sm">No CASP country data available.</p>';
            return;
        }

        const maxCount = caspsCountryData[0][1];

        container.innerHTML = caspsCountryData.map(([country, count]) => `
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <span class="text-xl">${countryFlags[country] || 'ğŸ³ï¸'}</span>
                    <span class="text-gray-700 font-medium">${country}</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-32 bg-gray-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-teal-500 to-blue-600 h-3 rounded-full progress-bar"
                             style="width: ${(count / maxCount) * 100}%"></div>
                    </div>
                    <span class="text-teal-600 font-bold text-lg">${count}</span>
                </div>
            </div>
        `).join('');
    }

    function populateCaspsAuthorityChart() {
        const container = document.getElementById('caspsAuthorityChart');

        if (!container) {
            return;
        }

        if (caspsAuthorityData.length === 0) {
            container.innerHTML = '<p class="text-gray-500 text-sm">No CASP authority data available.</p>';
            return;
        }

        const maxCount = caspsAuthorityData[0][1];

        container.innerHTML = caspsAuthorityData.map(([authority, count]) => `
            <div class="flex items-center justify-between">
                <span class="text-gray-700 font-medium text-sm">${authority}</span>
                <div class="flex items-center space-x-3">
                    <div class="w-32 bg-gray-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-teal-500 to-blue-600 h-3 rounded-full progress-bar"
                             style="width: ${(count / maxCount) * 100}%"></div>
                    </div>
                    <span class="text-teal-600 font-bold text-lg">${count}</span>
                </div>
            </div>
        `).join('');
    }

    function populateDetailsTable(dataToShow = filteredData) {
        const tbody = document.getElementById('detailsTable');
        const noResults = document.getElementById('noResults');

        if (dataToShow.length === 0) {
            tbody.innerHTML = '';
            noResults.classList.remove('hidden');
            return;
        }

        noResults.classList.add('hidden');
        tbody.innerHTML = dataToShow.map((item, index) => {
            // Get all currency columns dynamically
            const standardFields = ['id', 'issuer', 'state', 'authority', 'tokens', 'count'];
            const currencyFields = Object.keys(item).filter(key => !standardFields.includes(key));

            const currencyBadges = currencyFields
                .filter(currency => item[currency] > 0)
                .map(currency => {
                    const currencyCode = currency.toUpperCase();
                    const colorClass = currencyCode === 'EUR' ? 'orange' : 
                                     currencyCode === 'USD' ? 'pink' : 
                                     currencyCode === 'GBP' ? 'blue' : 
                                     currencyCode === 'CZK' ? 'purple' : 'green';
                    return `<span class="px-2 py-1 bg-${colorClass}-100 text-${colorClass}-700 rounded text-xs font-semibold">${currencyCode}</span>`;
                }).join(' ');

            return `
                <tr class="border-b hover:bg-gradient-to-r hover:from-teal-50 hover:to-blue-50 transition-all duration-200 ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}">
                    <td class="p-4">
                        <div class="font-semibold text-gray-800">${item.issuer}</div>
                    </td>
                    <td class="p-4">
                        <span class="px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium">
                            ${countryFlags[item.state] || 'ğŸ³ï¸'} ${item.state}
                        </span>
                    </td>
                    <td class="p-4 text-gray-600 text-sm">${item.authority}</td>
                    <td class="p-4">
                        <div class="text-sm text-gray-800 font-mono">${item.tokens || 'N/A'}</div>
                    </td>
                    <td class="p-4 text-center">
                        <span class="px-3 py-1 rounded-full text-sm font-bold ${
                            item.count > 1 ? 'bg-green-100 text-green-800' : 
                            item.count === 1 ? 'bg-yellow-100 text-yellow-800' : 
                            'bg-gray-100 text-gray-600'
                        }">
                            ${item.count}
                        </span>
                    </td>
                    <td class="p-4 text-center">
                        <div class="flex justify-center space-x-1">
                            ${currencyBadges}
                        </div>
                    </td>
                </tr>
            `;
        }).join('');
    }

    function populateCaspsTable(dataToShow = filteredCaspsData) {
        const tbody = document.getElementById('caspsTable');
        const noResults = document.getElementById('noCaspsResults');

        updateCaspsKpis(dataToShow);

        if (!tbody) {
            return;
        }

        if (dataToShow.length === 0) {
            tbody.innerHTML = '';
            if (noResults) {
                noResults.classList.remove('hidden');
            }
            return;
        }

        if (noResults) {
            noResults.classList.add('hidden');
        }

        tbody.innerHTML = dataToShow.map(item => {
            const servicesBadges = (item.services || []).map(service => `
                <span class="px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium">${service}</span>
            `).join(' ');

            const websiteBadges = (item.websites && item.websites.length > 0)
                ? item.websites.map(site => `
                    <a href="${site}" target="_blank" rel="noopener" class="block text-sm text-blue-600 underline break-words">${site}</a>
                `).join('')
                : '<span class="text-xs text-gray-500">Not provided</span>';

            return `
                <tr class="border-b hover:bg-gradient-to-r hover:from-teal-50 hover:to-blue-50 transition-all duration-200">
                    <td class="p-4">
                        <p class="text-gray-900 font-semibold">${item.name || 'N/A'}</p>
                    </td>
                    <td class="p-4">
                        <span class="px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm font-medium">
                            ${countryFlags[item.memberState] || 'ğŸ³ï¸'} ${item.memberState || 'Unknown'}
                        </span>
                    </td>
                    <td class="p-4 text-gray-600 text-sm">${item.authority || 'â€”'}</td>
                    <td class="p-4">
                        <div class="flex flex-wrap gap-2">${servicesBadges || '<span class="text-xs text-gray-500">Not specified</span>'}</div>
                    </td>
                    <td class="p-4">
                        <div class="space-y-1">${websiteBadges}</div>
                    </td>
                </tr>
            `;
        }).join('');
    }

    function populateNonCompliantTable(dataToShow = filteredNonCompliantData) {
        const tbody = document.getElementById('nonCompliantTable');
        const noResults = document.getElementById('noNonCompliantResults');

        if (dataToShow.length === 0) {
            tbody.innerHTML = '';
            noResults.classList.remove('hidden');
            return;
        }

        noResults.classList.add('hidden');
        tbody.innerHTML = dataToShow.map((item, index) => `
            <tr class="border-b hover:bg-gradient-to-r hover:from-red-50 hover:to-orange-50 transition-all duration-200 ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}">
                <td class="p-4">
                    <div class="font-semibold text-gray-800 flex items-center">
                        <span>${item.entity}</span>
                        ${item.isNew ? `
                            <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold text-blue-700 bg-blue-100">
                                <i class="fas fa-star text-blue-500 mr-1"></i>New
                            </span>
                        ` : ''}
                    </div>
                </td>
                <td class="p-4">
                    <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium">
                        ${countryFlags[item.country] || 'ğŸ³ï¸'} ${item.country}
                    </span>
                </td>
                <td class="p-4 text-gray-600 text-sm">${item.authority}</td>
                <td class="p-4">
                    <div class="space-y-1">
                        ${item.websites.map(website => `
                            <div class="text-xs text-blue-600 font-mono bg-blue-50 px-2 py-1 rounded">
                                ${website}
                            </div>
                        `).join('')}
                    </div>
                </td>
                <td class="p-4 text-center">
                    <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-bold" title="Flagged">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span class="sr-only">Flagged</span>
                    </span>
                </td>
            </tr>
        `).join('');
    }

    // Search functionality
    function filterData(searchTerm) {
        if (!searchTerm.trim()) {
            filteredData = [...data];
        } else {
            const term = searchTerm.toLowerCase();
            filteredData = data.filter(item =>
                item.issuer.toLowerCase().includes(term) ||
                item.state.toLowerCase().includes(term) ||
                item.authority.toLowerCase().includes(term) ||
                item.tokens.toLowerCase().includes(term)
            );
        }
        populateDetailsTable(filteredData);
    }

    function filterCaspsData(searchTerm) {
        if (!searchTerm.trim()) {
            filteredCaspsData = [...caspsData];
        } else {
            const term = searchTerm.toLowerCase();
            filteredCaspsData = caspsData.filter(item => {
                const services = (item.services || []).join(' ').toLowerCase();
                const websites = (item.websites || []).join(' ').toLowerCase();
                return (
                    (item.name || '').toLowerCase().includes(term) ||
                    (item.memberState || '').toLowerCase().includes(term) ||
                    (item.authority || '').toLowerCase().includes(term) ||
                    services.includes(term) ||
                    websites.includes(term)
                );
            });
        }
        populateCaspsTable(filteredCaspsData);
    }

    function filterNonCompliantData(searchTerm) {
        if (!searchTerm.trim()) {
            filteredNonCompliantData = [...nonCompliantData];
        } else {
            const term = searchTerm.toLowerCase();
            filteredNonCompliantData = nonCompliantData.filter(item => 
                item.entity.toLowerCase().includes(term) ||
                item.country.toLowerCase().includes(term) ||
                item.authority.toLowerCase().includes(term) ||
                item.websites.some(website => website.toLowerCase().includes(term))
            );
        }
        populateNonCompliantTable(filteredNonCompliantData);
    }

    // Tab switching functionality
    function switchTab(tab) {
        const overviewBtn = document.getElementById('overviewBtn');
        const detailsBtn = document.getElementById('detailsBtn');
        const nonCompliantBtn = document.getElementById('nonCompliantBtn');
        const caspsBtn = document.getElementById('caspsBtn');
        const overviewSection = document.getElementById('overviewSection');
        const detailsSection = document.getElementById('detailsSection');
        const caspsSection = document.getElementById('caspsSection');
        const nonCompliantSection = document.getElementById('nonCompliantSection');

        // Reset all buttons
        [overviewBtn, detailsBtn, nonCompliantBtn, caspsBtn].forEach(btn => {
            btn.className = 'tab-button tab-inactive px-5 py-3 rounded-xl font-semibold';
        });

        // Hide all sections
        [overviewSection, detailsSection, caspsSection, nonCompliantSection].forEach(section => {
            section.classList.add('hidden');
        });

        updateSectionIntro(tab);

        // Show selected tab
        if (tab === 'overview') {
            overviewBtn.className = 'tab-button tab-active px-5 py-3 rounded-xl font-semibold';
            overviewSection.classList.remove('hidden');
        } else if (tab === 'details') {
            detailsBtn.className = 'tab-button tab-active px-5 py-3 rounded-xl font-semibold';
            detailsSection.classList.remove('hidden');
        } else if (tab === 'casps') {
            caspsBtn.className = 'tab-button tab-active px-5 py-3 rounded-xl font-semibold';
            caspsSection.classList.remove('hidden');
        } else if (tab === 'nonCompliant') {
            nonCompliantBtn.className = 'tab-button tab-active px-5 py-3 rounded-xl font-semibold';
            nonCompliantSection.classList.remove('hidden');
        }
    }

    function resetDashboard() {
        switchTab('overview');

        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.value = '';
        }
        filteredData = [...data];
        populateDetailsTable(filteredData);

        const caspsSearchInput = document.getElementById('caspsSearchInput');
        if (caspsSearchInput) {
            caspsSearchInput.value = '';
        }
        filteredCaspsData = [...caspsData];
        populateCaspsTable(filteredCaspsData);

        const nonCompliantSearchInput = document.getElementById('nonCompliantSearchInput');
        if (nonCompliantSearchInput) {
            nonCompliantSearchInput.value = '';
        }
        filteredNonCompliantData = [...nonCompliantData];
        populateNonCompliantTable(filteredNonCompliantData);
    }

    // Event listeners
    document.getElementById('overviewBtn').addEventListener('click', () => switchTab('overview'));
    document.getElementById('detailsBtn').addEventListener('click', () => switchTab('details'));
    document.getElementById('caspsBtn').addEventListener('click', () => switchTab('casps'));
    document.getElementById('nonCompliantBtn').addEventListener('click', () => switchTab('nonCompliant'));

    const homeLogo = document.getElementById('homeLogo');
    if (homeLogo) {
        const handleDashboardReset = (event) => {
            event.preventDefault();
            resetDashboard();
        };

        homeLogo.addEventListener('click', handleDashboardReset);
        homeLogo.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' || event.key === ' ') {
                handleDashboardReset(event);
            }
        });
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
        filterData(e.target.value);
    });

    document.getElementById('clearSearch').addEventListener('click', () => {
        document.getElementById('searchInput').value = '';
        filterData('');
    });

    document.getElementById('caspsSearchInput').addEventListener('input', (e) => {
        filterCaspsData(e.target.value);
    });

    document.getElementById('clearCaspsSearch').addEventListener('click', () => {
        document.getElementById('caspsSearchInput').value = '';
        filterCaspsData('');
    });

    document.getElementById('nonCompliantSearchInput').addEventListener('input', (e) => {
        filterNonCompliantData(e.target.value);
    });

    document.getElementById('clearNonCompliantSearch').addEventListener('click', () => {
        document.getElementById('nonCompliantSearchInput').value = '';
        filterNonCompliantData('');
    });

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', initDashboard);
    document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(window.location.search);
        let requestedView = params.get('view');

        if (!requestedView && window.location.hash) {
            requestedView = window.location.hash.replace('#', '');
        }

        if (requestedView) {
            const normalized = requestedView.toLowerCase();
            const viewMap = {
                overview: 'overview',
                emts: 'details',
                details: 'details',
                casps: 'casps',
                noncompliant: 'nonCompliant',
                'non-compliant': 'nonCompliant'
            };

            const targetTab = viewMap[normalized];
            if (targetTab) {
                switchTab(targetTab);
            }
        }
    });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const consentBanner = document.getElementById('cookieConsent');
        if (!consentBanner) {
          return;
        }

        const storageKey = 'micardashboard-cookie-consent';

        const getStoredValue = () => {
          try {
            return window.localStorage.getItem(storageKey);
          } catch (error) {
            return null;
          }
        };

        const setStoredValue = (value) => {
          try {
            window.localStorage.setItem(storageKey, value);
          } catch (error) {
            // Ignore storage errors (e.g., private browsing)
          }
        };

        const hideBanner = () => {
          consentBanner.classList.add('cookie-hidden');
          consentBanner.setAttribute('aria-hidden', 'true');
        };

        const showBanner = () => {
          consentBanner.classList.remove('cookie-hidden');
          consentBanner.removeAttribute('aria-hidden');
        };

        const acceptButton = document.getElementById('cookieAccept');
        const dismissButton = document.getElementById('cookieDismiss');
        const remindButton = document.getElementById('cookieRemind');

        acceptButton?.addEventListener('click', () => {
          setStoredValue('accepted');
          hideBanner();
        });

        const handleRemind = () => {
          hideBanner();
        };

        dismissButton?.addEventListener('click', handleRemind);
        remindButton?.addEventListener('click', handleRemind);

        if (!getStoredValue()) {
          window.setTimeout(showBanner, 800);
        }
      });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('year').textContent = new Date().getFullYear();
      });
    </script>
    <!-- Polyfill to render flag emojis correctly on Windows-based browsers -->
    <script type="module" defer>
      import { polyfillCountryFlagEmojis } from 'https://cdn.skypack.dev/country-flag-emoji-polyfill';
      polyfillCountryFlagEmojis();
    </script>
</body>
</html>
